<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="./styles/interacao.css">
   <link rel="stylesheet" href="./styles/header.css">
   <script src="./js/funcoes.js"></script>
    <title>Forrest Quiz</title>
</head>
<body>
    <header>
        <a href="#"><img src="./assets/forrest_logo.png" alt="logo" class="logo"></a>
        <nav class="navegation">
            <ul>
                <li><a  href="index.html">Inicio</a></li>
                <li> <a id="sair" onclick="exit()">Sair</a></li>
                <div class="icon-name">
                    <span>Olá, <span class="user-name" id="user_name"></span>
                    <img src="assets/user-icon.png" alt="">
                </div>
            </ul>
        </nav> 
    </header>
<div class="container">
    <h1>FORREST QUIZ</h1>
<section id="p0">
    <h3>1 - Em que ano Forrest Gump nasceu?</h3>
    <label>
        <input type="radio" value="1" name="p0" onclick="resposta(0,this)">1985
    </label>
    <label >
        <input type="radio" value="2" name="p0" onclick="resposta(0,this)">1944
    </label>
    <label >
        <input type="radio" value="3" name="p0" onclick="resposta(0,this)">1993
    </label>
</section>
<section id="p1">
    <h3>2 - Em qual cidade Forrest nasceu?</h3>
    <label>
        <input type="radio" value="1" name="p1" onclick="resposta(1,this)">Alabama
    </label>
    <label >
        <input type="radio" value="2" name="p1" onclick="resposta(1,this)">New York
    </label>
    <label >
        <input type="radio" value="3" name="p1" onclick="resposta(1,this)">Texas
    </label>
</section>
<section id="p2">
    <h3>3 - Forrest participou de qual guerra?</h3>
    <label>
        <input type="radio" value="1" name="p2" onclick="resposta(2,this)">Guerra do Vietnã
    </label>
    <label >
        <input type="radio" value="2" name="p2" onclick="resposta(2,this)">Guerra do Golfo
    </label>
    <label >
        <input type="radio" value="3" name="p2" onclick="resposta(2,this)">2º Guerra Mundial
    </label>
</section>
<section id="p3">
    <h3>4 - Forrest representou seu país em qual esporte?</h3>
    <label>
        <input type="radio" value="1" name="p3" onclick="resposta(3,this)">Remo
    </label>
    <label >
        <input type="radio" value="2" name="p3" onclick="resposta(3,this)">Ping Pong
    </label>
    <label >
        <input type="radio" value="3" name="p3" onclick="resposta(3,this)">Baisebol
    </label>
</section>
<section id="p4">
    <h3>5 - A dança de Forrest inspirou a quem?</h3>
    <label>
        <input type="radio" value="1" name="p4" onclick="resposta(4,this)">Johnny Cash
    </label>
    <label >
        <input type="radio" value="2" name="p4" onclick="resposta(4,this)">Michael Jackson
    </label>
    <label >
        <input type="radio" value="3" name="p4" onclick="resposta(4,this)">Elvis Presley
    </label>
</section>
<button onclick="responder()">RESPONDER</button>
<h2>ACERTOS: <span id="res"></span></h2>
<h2>NÍVEL DE FAN: <span id="result"></span>
    <h2>SCORE: <div id="s"></div>
    <div class="voto">
        <h3> O que achou do Quiz?</h3>
<select name="voto" id="sel_op">
    <option value="">--selecione--</option>
    <option value="facil">facil</option>
    <option value="medio">medio</option>
    <option value="dificil">dificil</option>
</select>
<button onclick="votar()">Votar</button>
<span id="opSel"></span>
    </div>
</div>    
</section>

</body>
</html>
<script>
    var corretas =[2,1,1,2,3];
    var opSel = [];
    var qtdCorreta=0;
    var star='<img src="./assets/star.png" style="width:30px;">'
    var score_at = 0;

    function resposta(num_pergunta, selecionada){
        opSel[num_pergunta] = selecionada.value;
        id="p" + num_pergunta;  
    }

    function responder(){
        qtdCorreta =0;
        score_at=0;
        for(var index=0; index<corretas.length;index++){
            if(corretas[index]==opSel[index]){
                qtdCorreta++;
                score_at+=10;
            }if(qtdCorreta>=4){
                res.style.color="green";
                result.innerHTML=`${star+star+star+star+star} `
                s.innerHTML=`${score_at}`
            }else if(qtdCorreta==3){
                result.innerHTML=`${star+star+star} `
                s.innerHTML=`${score_at}`
                res.style.color="orange";
            }
            else if(qtdCorreta<=2){
                res.style.color="red";
                result.innerHTML=`${star}`
                s.innerHTML=`${score_at}`
            }
            
        }
        res.innerHTML = qtdCorreta;
    }


    var idUsuario = sessionStorage.ID_USUARIO
    var nome = sessionStorage.NOME_USUARIO
    var idsel =  sessionStorage.ID_SEL
    var opSelecionada=sel_op.value
    user_name.innerHTML=`${nome}`
    function exit() {
        sessionStorage.clear()
        window.location = "index.html"

        function cadastrar() {
            console.log("cadastrar")
        
            fetch(`/routeQuiz/quizCadastrar`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    idUsuario: sessionStorage.ID_USUARIO,
                    score: score_at
                })
            }).then((response) => {
                console.log("Resp QUIZ: ", response)
        
            }).catch((error) => {[
                console.log("Erro: " + error)
            ]})
        }
    }
</script>